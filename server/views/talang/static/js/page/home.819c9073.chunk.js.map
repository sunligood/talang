{"version":3,"sources":["page/home/order.js","page/home/index.js","common/header/index.js"],"names":["Option","Select","Order","props","hideModal","setState","visible","state","name","nameD","done","doneD","work","workD","isEdit","editKey","orderList","formRef","React","createRef","this","queryOrder","params","axios","post","then","res","data","message","success","msg","catch","err","current","getFieldValue","format","moment","Date","Object","assign","orderID","price","Number","toFixed","key","text","record","setTimeout","console","log","setFieldsValue","detail","columns","title","dataIndex","width","render","onClick","editOrd","style","marginRight","onConfirm","deleteOrd","className","value","placeholder","onChange","e","target","dateString","locale","query","type","marginLeft","reset","addOrd","background","borderColor","expandable","rowExpandable","dataSource","onCancel","destroyOnClose","footer","ref","onFinish","Item","marginBottom","defaultValue","TextArea","textAlign","htmlType","Component","Home","defaultSelectedKeys","defaultOpenKeys","mode","ReactDOM","StrictMode","document","getElementById","Header","Menu","SubMenu","handleClick"],"mappings":"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","file":"static/js/page/home.819c9073.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.scss';\r\nimport { Table, Button, Input, Select, DatePicker, Modal, Form, Popconfirm, message } from 'antd';\r\nimport locale from 'antd/lib/date-picker/locale/zh_CN';\r\nimport moment from 'moment'\r\nimport 'moment/locale/zh-cn';\r\nimport axios from 'axios'\r\nconst { Option } = Select;\r\nclass Order extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      name: '',\r\n      nameD: '',\r\n      done: '',\r\n      doneD: '',\r\n      work: '',\r\n      workD: '',\r\n      visible: false,\r\n      isEdit: false,\r\n      editKey: null,\r\n      orderList: []\r\n    }\r\n    this.formRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    this.queryOrder()\r\n  }\r\n  // 查询列表\r\n  queryOrder(params = '') {\r\n    if (!params) {\r\n      this.setState({\r\n        name: '',\r\n        nameD: '',\r\n        done: '',\r\n        doneD: '',\r\n        work: '',\r\n        workD: ''\r\n      })\r\n    }\r\n    axios.post('/order/query', params)\r\n      .then(res => {\r\n        this.setState({\r\n          orderList: res.data.data\r\n        })\r\n        message.success(res.data.msg);\r\n      })\r\n      .catch(err => {\r\n        message.success(err.data.msg);\r\n      })\r\n  }\r\n  onFinish(params) {\r\n    if (this.state.isEdit) {\r\n      if (!this.formRef.current.getFieldValue().done) {\r\n        params.done = moment(new Date()).format('YYYY-MM-DD')\r\n      } else {\r\n        params.done = params.done.format('YYYY-MM-DD')\r\n      }\r\n      // 提交数据\r\n      axios.post('/order/update', Object.assign(params, { orderID: this.state.editKey }))\r\n        .then(res => {\r\n          message.success(res.data.msg);\r\n          this.queryOrder()\r\n        })\r\n        .catch(err => {\r\n          message.success(err.data.msg);\r\n        })\r\n      this.setState({\r\n        isEdit: false,\r\n      });\r\n    } else {\r\n      if (!this.formRef.current.getFieldValue().done) {\r\n        params.done = moment(new Date()).format('YYYY-MM-DD')\r\n      } else {\r\n        params.done = params.done.format('YYYY-MM-DD')\r\n      }\r\n      params.price = Number(params.price).toFixed(2)\r\n      // 提交数据\r\n      axios.post('/order/add', params)\r\n        .then(res => {\r\n          message.success(res.data.msg);\r\n          this.queryOrder()\r\n        })\r\n        .catch(err => {\r\n          message.success(err.data.msg);\r\n        })\r\n    }\r\n    this.hideModal()\r\n  }\r\n  deleteOrd(key) {\r\n    // 提交数据\r\n    axios.post('/order/dalete', { orderID: key })\r\n      .then(res => {\r\n        message.success(res.data.msg);\r\n        this.queryOrder()\r\n      })\r\n      .catch(err => {\r\n        message.success(err.data.msg);\r\n      })\r\n  }\r\n  // 新增订单\r\n  addOrd() {\r\n    this.setState({\r\n      visible: true,\r\n    });\r\n  }\r\n  // 编辑订单\r\n  editOrd(text, record) {\r\n    this.setState({\r\n      visible: true,\r\n      isEdit: true,\r\n      editKey: text.orderID\r\n    });\r\n    setTimeout(() => {\r\n      console.log(moment(text.done).format('YYYY-MM-DD'))\r\n      this.formRef.current.setFieldsValue({\r\n        name: text.name,\r\n        work: text.work,\r\n        done: moment(text.done),\r\n        detail: text.detail,\r\n        price: text.price\r\n      })\r\n    }, 200);\r\n  }\r\n  // 查询\r\n  query() {\r\n    let params = {\r\n      name: this.state.name,\r\n      done: this.state.done,\r\n      work: this.state.work,\r\n    }\r\n    this.queryOrder(params)\r\n  }\r\n  // 重置\r\n  reset() {\r\n    this.setState({\r\n      name: '',\r\n      nameD: '',\r\n      done: '',\r\n      doneD: '',\r\n      work: '',\r\n      workD: ''\r\n    })\r\n    this.queryOrder()\r\n  }\r\n\r\n  hideModal = () => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  };\r\n  render() {\r\n    const columns = [\r\n      { title: '车牌号', dataIndex: 'name', orderID: 'name', width: 120 },\r\n      { title: '事项', dataIndex: 'work', orderID: 'work', width: 120 },\r\n      { title: '完成日期', dataIndex: 'done', orderID: 'done', width: 180 },\r\n      { title: '工作详情', dataIndex: 'detail', orderID: 'detail' },\r\n      {\r\n        title: '操作',\r\n        dataIndex: '',\r\n        orderID: 'x',\r\n        width: 100,\r\n        render: (text, record) =>\r\n          <div>\r\n            <a onClick={() => this.editOrd(text, record)} style={{ marginRight: 10 }}>编辑</a>\r\n            <Popconfirm title=\"确认删除该订单?\" onConfirm={() => this.deleteOrd(record.orderID)}>\r\n              <a>删除</a>\r\n            </Popconfirm>\r\n          </div>,\r\n      },\r\n    ];\r\n    return (\r\n      <div className='order-content'>\r\n        <div className='order-header'>\r\n          <div className='item'>\r\n            <Input value={this.state.nameD} placeholder=\"车牌号\" onChange={(e) => this.setState({ name: e.target.value, nameD: e.target.value })} />\r\n            <DatePicker value={this.state.doneD} onChange={(e, dateString) => this.setState({ done: dateString, doneD: moment(dateString) })} locale={locale} placeholder=\"日期\" style={{ marginRight: 10, width: 150 }} />\r\n            <Select value={this.state.workD} onChange={(work) => this.setState({ work: work, workD: work, })} placeholder=\"custom dropdown render\" style={{ width: 150 }}>\r\n              <Option value=\"\">请选择</Option>\r\n              <Option value=\"保养\">保养</Option>\r\n              <Option value=\"维修\">维修</Option>\r\n              <Option value=\"做漆\">做漆</Option>\r\n            </Select>\r\n            <Button onClick={() => this.query()} type=\"primary\" style={{ marginLeft: 10 }}>查询</Button>\r\n            <Button onClick={() => this.reset()} type=\"primary\" style={{ marginLeft: 10 }}>重置</Button>\r\n          </div>\r\n          <div className='item'>\r\n            <Button onClick={() => this.addOrd()} type=\"primary\" style={{ marginLeft: 10, background: '#7cb305', borderColor: '#7cb305' }}>添加</Button>\r\n          </div>\r\n        </div>\r\n\r\n        <Table\r\n          columns={columns}\r\n          expandable={{\r\n            // expandedRowRender: record => <p style={{ margin: 0 }}>{record.description}</p>,\r\n            rowExpandable: record => record.name !== 'Not Expandable',\r\n          }}\r\n          dataSource={this.state.orderList}\r\n        />\r\n        <Modal\r\n          title=\"添加订单\"\r\n          visible={this.state.visible}\r\n          onCancel={this.hideModal}\r\n          destroyOnClose={true}\r\n          footer={null}\r\n        >\r\n          <Form ref={this.formRef} name=\"control-ref\" onFinish={(params) => this.onFinish(params)}>\r\n            <Form.Item name=\"name\">\r\n              <Input placeholder=\"车牌号\" style={{ marginBottom: 20 }} />\r\n            </Form.Item>\r\n            <Form.Item name=\"price\">\r\n              <Input placeholder=\"金额\" style={{ marginBottom: 20 }} />\r\n            </Form.Item>\r\n            <Form.Item name=\"done\">\r\n              <DatePicker defaultValue={moment()} locale={locale} placeholder=\"日期\" style={{ marginBottom: 20, width: '100%' }} />\r\n            </Form.Item>\r\n            <Form.Item name=\"work\">\r\n              <Select placeholder=\"工作事项\" style={{ marginBottom: 20, width: '100%' }}>\r\n                <Option value=\"保养\">保养</Option>\r\n                <Option value=\"维修\">维修</Option>\r\n                <Option value=\"做漆\">做漆</Option>\r\n              </Select>\r\n            </Form.Item>\r\n            <Form.Item name=\"detail\">\r\n              <Input.TextArea placeholder=\"工作详情\" />\r\n            </Form.Item>\r\n            <Form.Item style={{ textAlign: 'right' }}>\r\n              <Button htmlType=\"button\" onClick={() => this.hideModal()}>\r\n                取消\r\n              </Button>\r\n              <Button type=\"primary\" htmlType=\"submit\" style={{ marginLeft: 20 }}>\r\n                确认\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nexport default Order\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport Header from '../../common/header/index'\r\nimport Order from './order.js'\r\nimport { Menu } from 'antd';\r\n\r\nclass Home extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='content'>\r\n\t\t\t\t<div className='l'>\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tdefaultSelectedKeys={['1']}\r\n\t\t\t\t\t\tdefaultOpenKeys={['sub1']}\r\n\t\t\t\t\t\tmode=\"inline\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Menu.Item key=\"1\">订单列表</Menu.Item>\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='r'>\r\n\t\t\t\t\t<Order></Order>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Header />\r\n\t\t<Home />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n","import React, { Component } from 'react';\r\nimport { Menu } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport './index.scss'\r\nconst { SubMenu } = Menu\r\nclass Header extends Component {\r\n  // constructor() {\r\n  //   super()\r\n  //   this.state = {\r\n  //     current: 'mail'\r\n  //   }\r\n  // }\r\n  state = {\r\n    current: 'home'\r\n  }\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n    this.setState({\r\n      current: e.key,\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"comm-header\">\r\n        <div className='wrap'>\r\n          <div className='l'>\r\n            踏浪汽车-后台管理\r\n          </div>\r\n          <div className='r'>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Header;\r\n"],"sourceRoot":""}